
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- The HTML 4.01 Transitional DOCTYPE declaration-->
<!-- above set at the top of the file will set     -->
<!-- the browser's rendering engine into           -->
<!-- "Quirks Mode". Replacing this declaration     -->
<!-- with a "Standards Mode" doctype is supported, -->
<!-- but may lead to some differences in layout.   -->

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
<title>Connexus Social: Facebook Login</title>
<h1>Connex.us</h1>
</head>

Manage |
<a href="/CreateStream.html">Create</a> |
<a href="/ViewAllStreams.jsp">View</a> |
<a href="/Search.jsp">Search</a> | 
<a href="/Trending.jsp">Trending</a> |
<a href="/FacebookLogin.html">Social</a>

<h2>Social</h2>

Login with Facebook to share streams with your friends and groups!
<br>
<br>

<body>


	<div id="fb-root"></div>
	<script>
  window.fbAsyncInit = function() {
  FB.init({
    appId      : '514441631980187', // App ID
    channelUrl : '//WWW.connexus-donna.appspot.com/channel.html', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });

 
  FB.Event.subscribe('auth.authResponseChange', function(response) {
   
    if (response.status === 'connected') {
      testAPI();
    } else if (response.status === 'not_authorized') {
    
      FB.login();
      
    } else {
    
      FB.login();
      
    }
  });
  };

  // Load the SDK asynchronously
  (function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   ref.parentNode.insertBefore(js, ref);
  }(document));

  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Good to see you, ' + response.name + '.');
    });
  }
  
function fbLogout() {
        FB.logout(function (response) {
            //Do what ever you want here when logged out like reloading the page
            window.location.reload();
        });
    }
</script>
	<p id="demo"></p>
	<script>
function fbstatus() {
	var y="hello";
	FB.Event.subscribe('auth.authResponseChange', function(response) {
		  alert('The status of the session is: ' + response.status);
		});	 
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    //window.location.href="/FBLoginSuccess.html";
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
    y="You are connected!!!!!!!!!!!!!!!!!!!!!!!!";    
  } else if (response.status === 'not_authorized') {
    y="else1";
  } else {
    y="else2";
  }  
 });
document.getElementById("demo").innerHTML=y;
}
fbstatus();


</script>
	<p id="demo1"></p>
	<script>
function myFunction()
{
var x="";
var time=new Date().getHours();
if (time<20)
  {
  x="Good day";
  }
document.getElementById("demo1").innerHTML=x;
}
myFunction();


function fbpost() {
FB.ui(
		  {
		    method: 'feed',
		    name: 'Facebook Dialogs',
		    link: 'http://connexus-donna.appspot.com/FacebookLogin.html',
		    picture: 'http://fbrell.com/f8.jpg',
		    caption: 'Reference Documentation',
		    description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
		  },
		  function(response) {
		    if (response && response.post_id) {
		      alert('Post was published.');
		    } else {
		      alert('Post was not published.');
		    }
		  }
		);

}
</script>

<input id="fbposting" type="button" value="Post" onclick="fbpost()" />

	<!--span id="fbLogout" onclick="fbLogout()"><a class="fb_button fb_button_medium"><span class="fb_button_text">Logout</span></a></span-->




	<!--
  Below we include the Login Button social plugin. This button uses the JavaScript SDK to
  present a graphical Login button that triggers the FB.login() function when clicked.

  Learn more about options for the login button plugin:
  /docs/reference/plugins/login/ -->

	<fb:login-button show-faces="true" width="200" max-rows="1"></fb:login-button>

	<br>
	<br>
	<input id="logout" type="button" value="Logout" onclick="fbLogout()" />
	<br>
	
	

</body>
</html>
